"use strict";(self.webpackChunkneoforged_docs=self.webpackChunkneoforged_docs||[]).push([[3233],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>k});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(a),m=o,k=d["".concat(s,".").concat(m)]||d[m]||u[m]||r;return a?n.createElement(k,i(i({ref:t},c),{},{components:a})):n.createElement(k,i({ref:t},c))}));function k(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:o,i[1]=l;for(var p=2;p<r;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},9131:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var n=a(7462),o=(a(7294),a(3905));const r={},i="Block States",l={unversionedId:"blocks/states",id:"blocks/states",title:"Block States",description:"Legacy Behavior",source:"@site/docs/blocks/states.md",sourceDirName:"blocks",slug:"/blocks/states",permalink:"/docs/blocks/states",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"mainSidebar",previous:{title:"Blocks",permalink:"/docs/blocks/"},next:{title:"Events",permalink:"/docs/concepts/events"}},s={},p=[{value:"Legacy Behavior",id:"legacy-behavior",level:2},{value:"Introduction of States",id:"introduction-of-states",level:2},{value:"Proper Usage of Block States",id:"proper-usage-of-block-states",level:2},{value:"Implementing Block States",id:"implementing-block-states",level:2},{value:"Using <code>BlockState</code>&#39;s",id:"using-blockstates",level:2}],c={toc:p},d="wrapper";function u(e){let{components:t,...a}=e;return(0,o.kt)(d,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"block-states"},"Block States"),(0,o.kt)("h2",{id:"legacy-behavior"},"Legacy Behavior"),(0,o.kt)("p",null,"In Minecraft 1.7 and previous versions, blocks which need to store placement or state data that did not have BlockEntities used ",(0,o.kt)("strong",{parentName:"p"},"metadata"),". Metadata was an extra number stored with the block, allowing different rotations, facings, or even completely separate behaviors within a block."),(0,o.kt)("p",null,"However, the metadata system was confusing and limited, since it was stored as only a number alongside the block ID, and had no meaning except what was commented in the code. For example, to implement a block that can face a direction and be on either the upper or lower half of a block space (such as a stair): "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},"switch (meta) {\n  case 0: { ... } // south and on the lower half of the block\n  case 1: { ... } // south on the upper side of the block\n  case 2: { ... } // north and on the lower half of the block\n  case 3: { ... } // north and on the upper half of the block\n  // ... etc. ...\n}\n")),(0,o.kt)("p",null,"Because the numbers carry no meaning by themselves, no one could know what they represent unless they had access to the source code and comments."),(0,o.kt)("h2",{id:"introduction-of-states"},"Introduction of States"),(0,o.kt)("p",null,"In Minecraft 1.8 and above, the metadata system, along with the block ID system, was deprecated and eventually replaced with the ",(0,o.kt)("strong",{parentName:"p"},"block state system"),". The block state system abstracts out the details of the block's properties from the other behaviors of the block."),(0,o.kt)("p",null,"Each ",(0,o.kt)("em",{parentName:"p"},"property")," of a block is described by an instance of ",(0,o.kt)("inlineCode",{parentName:"p"},"Property<?>"),". Examples of block properties include instruments (",(0,o.kt)("inlineCode",{parentName:"p"},"EnumProperty<NoteBlockInstrument>"),"), facing (",(0,o.kt)("inlineCode",{parentName:"p"},"DirectionProperty"),"), poweredness (",(0,o.kt)("inlineCode",{parentName:"p"},"Property<Boolean>"),"), etc. Each property has the value of the type ",(0,o.kt)("inlineCode",{parentName:"p"},"T")," parametrized by ",(0,o.kt)("inlineCode",{parentName:"p"},"Property<T>"),"."),(0,o.kt)("p",null,"A unique pair can be constructed from the ",(0,o.kt)("inlineCode",{parentName:"p"},"Block")," and a map of the ",(0,o.kt)("inlineCode",{parentName:"p"},"Property<?>")," to their associated values. This unique pair is called a ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState"),"."),(0,o.kt)("p",null,'The previous system of meaningless metadata values were replaced by a system of block properties, which are easier to interpret and deal with. Previously, a stone button which is facing east and is powered or held down is represented by "',(0,o.kt)("inlineCode",{parentName:"p"},"minecraft:stone_button")," with metadata ",(0,o.kt)("inlineCode",{parentName:"p"},"9"),'. Now, this is represented by "',(0,o.kt)("inlineCode",{parentName:"p"},"minecraft:stone_button[facing=east,powered=true]"),'".'),(0,o.kt)("h2",{id:"proper-usage-of-block-states"},"Proper Usage of Block States"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState")," system is a flexible and powerful system, but it also has limitations. ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState"),"s are immutable, and all combinations of their properties are generated on startup of the game. This means that having a ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState")," with many properties and possible values will slow down the loading of the game, and befuddle anyone trying to make sense of your block logic."),(0,o.kt)("p",null,"Not all blocks and situations require the usage of ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState"),"; only the most basic properties of a block should be put into a ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState"),", and any other situation is better off with having a ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockEntity")," or being a separate ",(0,o.kt)("inlineCode",{parentName:"p"},"Block"),". Always consider if you actually need to use blockstates for your purposes."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"A good rule of thumb is: ",(0,o.kt)("strong",{parentName:"p"},"if it has a different name, it should be a separate block"),".")),(0,o.kt)("p",null,"An example is making chair blocks: the ",(0,o.kt)("em",{parentName:"p"},"direction")," of the chair should be a ",(0,o.kt)("em",{parentName:"p"},"property"),", while the different ",(0,o.kt)("em",{parentName:"p"},"types of wood"),' should be separated into different blocks.\nAn "Oak Chair" facing east (',(0,o.kt)("inlineCode",{parentName:"p"},"oak_chair[facing=east]"),') is different from a "Spruce Chair" facing west (',(0,o.kt)("inlineCode",{parentName:"p"},"spruce_chair[facing=west]"),")."),(0,o.kt)("h2",{id:"implementing-block-states"},"Implementing Block States"),(0,o.kt)("p",null,"In your Block class, create or reference ",(0,o.kt)("inlineCode",{parentName:"p"},"static final")," ",(0,o.kt)("inlineCode",{parentName:"p"},"Property<?>")," objects for every property that your Block has. You are free to make your own ",(0,o.kt)("inlineCode",{parentName:"p"},"Property<?>")," implementations, but the means to do that are not covered in this article. The vanilla code provides several convenience implementations:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"IntegerProperty"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Implements ",(0,o.kt)("inlineCode",{parentName:"li"},"Property<Integer>"),". Defines a property that holds an integer value."),(0,o.kt)("li",{parentName:"ul"},"Created by calling ",(0,o.kt)("inlineCode",{parentName:"li"},"IntegerProperty#create(String propertyName, int minimum, int maximum)"),"."))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"BooleanProperty"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Implements ",(0,o.kt)("inlineCode",{parentName:"li"},"Property<Boolean>"),". Defines a property that holds a ",(0,o.kt)("inlineCode",{parentName:"li"},"true")," or ",(0,o.kt)("inlineCode",{parentName:"li"},"false")," value."),(0,o.kt)("li",{parentName:"ul"},"Created by calling ",(0,o.kt)("inlineCode",{parentName:"li"},"BooleanProperty#create(String propertyName)"),"."))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"EnumProperty<E extends Enum<E>>"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Implements ",(0,o.kt)("inlineCode",{parentName:"li"},"Property<E>"),". Defines a property that can take on the values of an Enum class."),(0,o.kt)("li",{parentName:"ul"},"Created by calling ",(0,o.kt)("inlineCode",{parentName:"li"},"EnumProperty#create(String propertyName, Class<E> enumClass)"),"."),(0,o.kt)("li",{parentName:"ul"},"It is also possible to use only a subset of the Enum values (e.g. 4 out of 16 ",(0,o.kt)("inlineCode",{parentName:"li"},"DyeColor"),"s). See the overloads of ",(0,o.kt)("inlineCode",{parentName:"li"},"EnumProperty#create"),"."))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"DirectionProperty"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"This is a convenience implementation of ",(0,o.kt)("inlineCode",{parentName:"li"},"EnumProperty<Direction>")),(0,o.kt)("li",{parentName:"ul"},"Several convenience predicates are also provided. For example, to get a property that represents the cardinal directions, call ",(0,o.kt)("inlineCode",{parentName:"li"},'DirectionProperty.create("<name>", Direction.Plane.HORIZONTAL)'),"; to get the X directions, ",(0,o.kt)("inlineCode",{parentName:"li"},'DirectionProperty.create("<name>", Direction.Axis.X)'),".")))),(0,o.kt)("p",null,"The class ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockStateProperties")," contains shared vanilla properties which should be used or referenced whenever possible, in place of creating your own properties."),(0,o.kt)("p",null,"When you have your desired ",(0,o.kt)("inlineCode",{parentName:"p"},"Property<>")," objects, override ",(0,o.kt)("inlineCode",{parentName:"p"},"Block#createBlockStateDefinition(StateDefinition$Builder)")," in your Block class. In that method, call ",(0,o.kt)("inlineCode",{parentName:"p"},"StateDefinition$Builder#add(...);"),"  with the parameters as every ",(0,o.kt)("inlineCode",{parentName:"p"},"Property<?>")," you wish the block to have."),(0,o.kt)("p",null,'Every block will also have a "default" state that is automatically chosen for you. You can change this "default" state by calling the ',(0,o.kt)("inlineCode",{parentName:"p"},"Block#registerDefaultState(BlockState)"),' method from your constructor. When your block is placed it will become this "default" state. An example from ',(0,o.kt)("inlineCode",{parentName:"p"},"DoorBlock"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},"this.registerDefaultState(\n  this.stateDefinition.any()\n    .setValue(FACING, Direction.NORTH)\n    .setValue(OPEN, false)\n    .setValue(HINGE, DoorHingeSide.LEFT)\n    .setValue(POWERED, false)\n    .setValue(HALF, DoubleBlockHalf.LOWER)\n);\n")),(0,o.kt)("p",null,"If you wish to change what ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState")," is used when placing your block, you can overwrite ",(0,o.kt)("inlineCode",{parentName:"p"},"Block#getStateForPlacement(BlockPlaceContext)"),". This can be used to, for example, set the direction of your block depending on where the player is standing when they place it."),(0,o.kt)("p",null,"Because ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState"),"s are immutable, and all combinations of their properties are generated on startup of the game, calling ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState#setValue(Property<T>, T)")," will simply go to the ",(0,o.kt)("inlineCode",{parentName:"p"},"Block"),"'s ",(0,o.kt)("inlineCode",{parentName:"p"},"StateHolder")," and request the ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState")," with the set of values you want."),(0,o.kt)("p",null,"Because all possible ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState"),"s are generated at startup, you are free and encouraged to use the reference equality operator (",(0,o.kt)("inlineCode",{parentName:"p"},"=="),") to check if two ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState"),"s are equal."),(0,o.kt)("h2",{id:"using-blockstates"},"Using ",(0,o.kt)("inlineCode",{parentName:"h2"},"BlockState"),"'s"),(0,o.kt)("p",null,"You can get the value of a property by calling ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState#getValue(Property<?>)"),", passing it the property you want to get the value of.\nIf you want to get a ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState")," with a different set of values, simply call ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState#setValue(Property<T>, T)")," with the property and its value."),(0,o.kt)("p",null,"You can get and place ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockState"),"'s in the level using ",(0,o.kt)("inlineCode",{parentName:"p"},"Level#setBlockAndUpdate(BlockPos, BlockState)")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"Level#getBlockState(BlockPos)"),". If you are placing a ",(0,o.kt)("inlineCode",{parentName:"p"},"Block"),", call ",(0,o.kt)("inlineCode",{parentName:"p"},"Block#defaultBlockState()"),' to get the "default" state, and use subsequent calls to ',(0,o.kt)("inlineCode",{parentName:"p"},"BlockState#setValue(Property<T>, T)")," as stated above to achieve the desired state."))}u.isMDXComponent=!0}}]);