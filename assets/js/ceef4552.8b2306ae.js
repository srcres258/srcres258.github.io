"use strict";(self.webpackChunkneoforged_docs=self.webpackChunkneoforged_docs||[]).push([[6919],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>u});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},m="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},f=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),m=d(n),f=i,u=m["".concat(s,".").concat(f)]||m[f]||p[f]||r;return n?a.createElement(u,l(l({ref:t},c),{},{components:n})):a.createElement(u,l({ref:t},c))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=f;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[m]="string"==typeof e?e:i,l[1]=o;for(var d=2;d<r;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}f.displayName="MDXCreateElement"},6132:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var a=n(7462),i=(n(7294),n(3905));const r={},l="Access Transformers",o={unversionedId:"advanced/accesstransformers",id:"advanced/accesstransformers",title:"Access Transformers",description:"Access Transformers (ATs for short) allow for widening the visibility and modifying the final flags of classes, methods, and fields. They allow modders to access and modify otherwise inaccessible members in classes outside their control.",source:"@site/docs/advanced/accesstransformers.md",sourceDirName:"advanced",slug:"/advanced/accesstransformers",permalink:"/docs/advanced/accesstransformers",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"mainSidebar",previous:{title:"Versioning",permalink:"/docs/gettingstarted/versioning"},next:{title:"Block Entities",permalink:"/docs/blockentities/"}},s={},d=[{value:"Adding ATs",id:"adding-ats",level:2},{value:"Comments",id:"comments",level:2},{value:"Access Modifiers",id:"access-modifiers",level:2},{value:"Targets and Directives",id:"targets-and-directives",level:2},{value:"Classes",id:"classes",level:3},{value:"Fields",id:"fields",level:3},{value:"Methods",id:"methods",level:3},{value:"Specifying Types",id:"specifying-types",level:4},{value:"Examples",id:"examples",level:2}],c={toc:d},m="wrapper";function p(e){let{components:t,...n}=e;return(0,i.kt)(m,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"access-transformers"},"Access Transformers"),(0,i.kt)("p",null,"Access Transformers (ATs for short) allow for widening the visibility and modifying the ",(0,i.kt)("inlineCode",{parentName:"p"},"final")," flags of classes, methods, and fields. They allow modders to access and modify otherwise inaccessible members in classes outside their control."),(0,i.kt)("p",null,"The ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/NeoForged/AccessTransformers/blob/main/FMLAT.md"},"specification document")," can be viewed on the NeoForged GitHub."),(0,i.kt)("h2",{id:"adding-ats"},"Adding ATs"),(0,i.kt)("p",null,"Adding an Access Transformer to your mod project is as simple as adding a single line into your ",(0,i.kt)("inlineCode",{parentName:"p"},"build.gradle"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},"// This block is where your mappings version is also specified\nminecraft {\n  accessTransformer = file('src/main/resources/META-INF/accesstransformer.cfg')\n}\n")),(0,i.kt)("p",null,"After adding or modifying the Access Transformer, the gradle project must be refreshed for the transformations to take effect."),(0,i.kt)("p",null,"During development, the AT file can be anywhere specified by the line above. However, when loading in a non-development environment, Forge will only search for the exact path of ",(0,i.kt)("inlineCode",{parentName:"p"},"META-INF/accesstransformer.cfg")," in your JAR file."),(0,i.kt)("h2",{id:"comments"},"Comments"),(0,i.kt)("p",null,"All text after a ",(0,i.kt)("inlineCode",{parentName:"p"},"#")," until the end of the line will be treated as a comment and will not be parsed."),(0,i.kt)("h2",{id:"access-modifiers"},"Access Modifiers"),(0,i.kt)("p",null,"Access modifiers specify to what new member visibility the given target will be transformed to. In decreasing order of visibility:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"public")," - visible to all classes inside and outside its package"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"protected")," - visible only to classes inside the package and subclasses"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"default")," - visible only to classes inside the package"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"private")," - visible only to inside the class")),(0,i.kt)("p",null,"A special modifier ",(0,i.kt)("inlineCode",{parentName:"p"},"+f")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"-f")," can be appended to the aforementioned modifiers to either add or remove respectively the ",(0,i.kt)("inlineCode",{parentName:"p"},"final")," modifier, which prevents subclassing, method overriding, or field modification when applied."),(0,i.kt)("admonition",{type:"danger"},(0,i.kt)("p",{parentName:"admonition"},"Directives only modify the method they directly reference; any overriding methods will not be access-transformed. It is advised to ensure transformed methods do not have non-transformed overrides that restrict the visibility, which will result in the JVM throwing an error."),(0,i.kt)("p",{parentName:"admonition"},"Examples of methods that can be safely transformed are ",(0,i.kt)("inlineCode",{parentName:"p"},"private")," methods, ",(0,i.kt)("inlineCode",{parentName:"p"},"final")," methods (or methods in ",(0,i.kt)("inlineCode",{parentName:"p"},"final")," classes), and ",(0,i.kt)("inlineCode",{parentName:"p"},"static")," methods.")),(0,i.kt)("h2",{id:"targets-and-directives"},"Targets and Directives"),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"When using Access Transformers on Minecraft classes, the SRG name must be used for fields and methods.")),(0,i.kt)("h3",{id:"classes"},"Classes"),(0,i.kt)("p",null,"To target classes:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"<access modifier> <fully qualified class name>\n")),(0,i.kt)("p",null,"Inner classes are denoted by combining the fully qualified name of the outer class and the name of the inner class with a ",(0,i.kt)("inlineCode",{parentName:"p"},"$")," as separator."),(0,i.kt)("h3",{id:"fields"},"Fields"),(0,i.kt)("p",null,"To target fields:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"<access modifier> <fully qualified class name> <field name>\n")),(0,i.kt)("h3",{id:"methods"},"Methods"),(0,i.kt)("p",null,"Targeting methods require a special syntax to denote the method parameters and return type:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"<access modifier> <fully qualified class name> <method name>(<parameter types>)<return type>\n")),(0,i.kt)("h4",{id:"specifying-types"},"Specifying Types"),(0,i.kt)("p",null,'Also called "descriptors": see the ',(0,i.kt)("a",{parentName:"p",href:"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.3.2"},"Java Virtual Machine Specification, SE 8, sections 4.3.2 and 4.3.3")," for more technical details."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"B")," - ",(0,i.kt)("inlineCode",{parentName:"li"},"byte"),", a signed byte"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"C")," - ",(0,i.kt)("inlineCode",{parentName:"li"},"char"),", a Unicode character code point in UTF-16"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"D")," - ",(0,i.kt)("inlineCode",{parentName:"li"},"double"),", a double-precision floating-point value"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"F")," - ",(0,i.kt)("inlineCode",{parentName:"li"},"float"),", a single-precision floating-point value"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"I")," - ",(0,i.kt)("inlineCode",{parentName:"li"},"integer"),", a 32-bit integer"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"J")," - ",(0,i.kt)("inlineCode",{parentName:"li"},"long"),", a 64-bit integer"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"S")," - ",(0,i.kt)("inlineCode",{parentName:"li"},"short"),", a signed short"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Z")," - ",(0,i.kt)("inlineCode",{parentName:"li"},"boolean"),", a ",(0,i.kt)("inlineCode",{parentName:"li"},"true")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"false")," value"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"[")," - references one dimension of an array",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Example: ",(0,i.kt)("inlineCode",{parentName:"li"},"[[S")," refers to ",(0,i.kt)("inlineCode",{parentName:"li"},"short[][]")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"L<class name>;")," - references a reference type",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Example: ",(0,i.kt)("inlineCode",{parentName:"li"},"Ljava/lang/String;")," refers to ",(0,i.kt)("inlineCode",{parentName:"li"},"java.lang.String")," reference type ",(0,i.kt)("em",{parentName:"li"},"(note the use of slashes instead of periods)")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"(")," - references a method descriptor, parameters should be supplied here or nothing if no parameters are present"),(0,i.kt)("li",{parentName:"ul"},"Example: ",(0,i.kt)("inlineCode",{parentName:"li"},"<method>(I)Z")," refers to a method that requires an integer argument and returns a boolean"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"V")," - indicates a method returns no value, can only be used at the end of a method descriptor",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Example: ",(0,i.kt)("inlineCode",{parentName:"li"},"<method>()V")," refers to a method that has no arguments and returns nothing")))),(0,i.kt)("h2",{id:"examples"},"Examples"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"# Makes public the ByteArrayToKeyFunction interface in Crypt\npublic net.minecraft.util.Crypt$ByteArrayToKeyFunction\n\n# Makes protected and removes the final modifier from 'random' in MinecraftServer\nprotected-f net.minecraft.server.MinecraftServer f_129758_ #random\n\n# Makes public the 'makeExecutor' method in Util,\n# accepting a String and returns an ExecutorService\npublic net.minecraft.Util m_137477_(Ljava/lang/String;)Ljava/util/concurrent/ExecutorService; #makeExecutor\n\n# Makes public the 'leastMostToIntArray' method in UUIDUtil,\n# accepting two longs and returning an int[]\npublic net.minecraft.core.UUIDUtil m_235872_(JJ)[I #leastMostToIntArray\n")))}p.isMDXComponent=!0}}]);